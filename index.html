<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chantilly academy pharmacy</title>
    <link rel="stylesheet" href="./styles.css">
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f8f7ff;
        }
    </style>
</head>
<body>
    <div id="password-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;">
        <div style="background: white; padding: 40px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h2 style="margin-top: 0;">Enter Password</h2>
            <form id="password-check-form">
                <div class="form-group">
                    <input type="password" id="password-input" placeholder="Password" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em; box-sizing: border-box;">
                </div>
                <button type="submit" style="width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 5px; font-size: 1em; cursor: pointer;">Submit</button>
                <div id="password-error" style="color: #dc3545; margin-top: 10px; display: none;">Incorrect password!</div>
            </form>
        </div>
    </div>
    
    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>menu</h2>
        </div>
        <ul class="sidebar-nav">
            <li><a href="index.html" class="active">home</a></li>
            <li><a href="medidose.html">medidose labels</a></li>
            <li><a href="rxlabel.html">rx labels</a></li>
            <li><a href="settings.html">settings</a></li>
        </ul>
    </nav>

    <div class="main-content">
        <div class="welcome-container">
            <h1>welcome to the chantilly academy pharmacy system</h1>
            <p>select a label type to get started:</p>
            
            <div class="button-group">
                <a href="medidose.html" class="feature-btn">
                    <h3>medidose labels</h3>
                    <p>generate medication dosing labels with barcodes</p>
                </a>
                
                <a href="rxlabel.html" class="feature-btn">
                    <h3>rx labels</h3>
                    <p>create prescription labels for patient medications</p>
                </a>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-data.js"></script>

    <script>
    const passwordModal = document.getElementById('password-modal');
    const passwordCheckForm = document.getElementById('password-check-form');
    const passwordInput = document.getElementById('password-input');
    const passwordError = document.getElementById('password-error');

    // Check if already authenticated
    if (!sessionStorage.getItem('authenticated')) {
        passwordModal.style.display = 'flex';
    }

    passwordCheckForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const password = passwordInput.value;
        
        try {
            const isValid = await settingsManager.verifyPassword(password);
            if (isValid) {
                sessionStorage.setItem('authenticated', 'true');
                passwordModal.style.display = 'none';
                passwordError.style.display = 'none';
            } else {
                passwordError.style.display = 'block';
                passwordInput.value = '';
            }
        } catch (error) {
            console.error('Error checking password:', error);
            passwordError.textContent = 'Error checking password. Please try again.';
            passwordError.style.display = 'block';
        }
    });
    </script>



</body>
</html>
